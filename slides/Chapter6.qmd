---
title: "Short Course on R Tools"
subtitle: "Navigate the CRAN submission process"
title-slide-attributes:
  data-background-image: mu-bg.png
  data-background-size: stretch
  data-slide-number: none
format: 
  revealjs:
    transition: fade
    scrollable: true
---

# Outline

::: {.fragment .fade-up}
-   Introduction & CRAN Overview
-   Pre-Submission Preparation
-   Automated Checks with devtools
-   usethis Helpers for Release
-   Releasing with `devtools::release()`
-   Common Pitfalls & Debugging
-   CRAN Policies & Guidelines
-   Post-Submission Workflow
-   Hands-On Exercises

# 1. Introduction & CRAN Overview

* **What is CRAN?** central repository for R packages
* **Roles**: authors, CRAN maintainers, users
* **Submission flow**:

  1. Local checks → 2. devtools release → 3. CRAN review → 4. Publication

??? note
High-level diagram of submission pipeline.

# 2. Pre-Submission Preparation

## DESCRIPTION & NAMESPACE

* Ensure fields: Version, URL, BugReports, License
* Semantic versioning: increment patch for minor fixes

## Documentation & Vignettes

* All help files up to date
* Vignettes build without errors

## Tests & Coverage

* `devtools::test()` passes
* Consider `covr::report()`

??? note
Emphasize `R CMD check --as-cran` equivalence.

# 3. Automated Checks with devtools

```{.r}
# Run full checks
devtools::check()
# Simulate CRAN environment
devtools::check(platform = "windows-x86_64")
```

* Check outputs: warnings, errors, notes
* Use `r-pkgs` recommendations for note-level fixes

??? note
Show sample check log and resolution.

# 4. usethis Helpers for Release

* `usethis::use_cran_badge()` adds status badge
* `usethis::use_release_issue()` creates GitHub issue template
* `usethis::use_news_md()` manages NEWS.md

```{.r}
usethis::use_version("patch")
usethis::use_news_md()
```

??? note
Demo bumping version and drafting NEWS.

# 5. Releasing with `devtools::release()`

```{.r}
devtools::release()
# prompts:
# Are you ready to submit to CRAN? Yes
# Confirm: bump version, commit, tag
# Checks run automatically
```

* Interactive confirmations
* Automatic Git push & tag

??? note
Highlight `--no-build-vignettes` option if needed.

# 6. Common Pitfalls & Debugging

| Issue                       | Solution                                |
| --------------------------- | --------------------------------------- |
| CMD check ERRORs            | Fix code, missing imports, syntax       |
| NOTE: global binding issues | Use `utils::globalVariables()`          |
| Mac OS / Windows specific   | Test on all major platforms; try Docker |
| Vignette build failures     | Check missing packages, long file names |

??? note
Live fix of a note about argument mismatches.

# 7. CRAN Policies & Guidelines

* **Repository policy**: no heavy data, compiled code only with license
* **Package size & dependencies**: keep minimal
* **Code of conduct**
* **Binary vs source**: platform builds

??? note
Refer to [https://cran.r-project.org/web/packages/policies.html](https://cran.r-project.org/web/packages/policies.html).

# 8. Post-Submission Workflow

* **CRAN response**: review submitted log, email communication
* **Patch release**: if maintainers request changes
* **Version tags**: GitHub releases page
* **Announcement**: update project website, social media

??? note
Show sample CRAN acceptance email and next steps.

# 9. Hands-On Exercises (30 min)

1. **Simulate release**: run `devtools::release()` in demo package
2. **Fix check notes**: resolve two common notes
3. **Draft NEWS.md** for a hypothetical minor release
4. **Use usethis** to add CRAN badge and release issue

??? note
Break into pairs, review each other’s work.

# Resources & References

* **CRAN Release Guide**: [https://r-pkgs.org/release.html](https://r-pkgs.org/release.html)
* **devtools docs**: [https://devtools.r-lib.org](https://devtools.r-lib.org)
* **usethis reference**: [https://usethis.r-lib.org](https://usethis.r-lib.org)

??? note
Provide cheat-sheet of key functions.

# Q\&A

* Specific submission questions?
* Handling platform-specific checks?

# Thank You

* Good luck with your CRAN submissions!
