---
title: "Short Course on R Tools"
subtitle: "CRAN submission and Collaborate via GitHub"
title-slide-attributes:
  data-background-image: mu-bg.png
  data-background-size: stretch
  data-slide-number: none
format: 
  revealjs:
    transition: fade
    scrollable: true
---

# 1. CRAN Submission: Overview

CRAN is the **Comprehensive R Archive Network** ‚Äî the main repository for R packages.

Submitting to CRAN means:

::: incremental
-   ‚úÖ Your package is publicly available
-   üß™ It passes strict quality checks
-   üåç It becomes accessible via `install.packages("yourpkg")`
:::

# 2. Requirements Before Submission

Make sure your package:

::: incremental
-   Passes `R CMD check` with **no ERRORs**, **no WARNINGs**, and **no (avoidable) NOTEs**
-   Has proper documentation for all exported functions
-   Has a valid `LICENSE`
-   Uses a CRAN-acceptable package name
-   Has examples that run in \< 5 seconds
:::

. . .

Run:

``` r
devtools::check()
```

## ‚ö†Ô∏è Handling NOTEs and WARNINGs

Some NOTEs are common (e.g., missing author ORCID), but‚Ä¶

::: {.fragment .fade-up}
> ‚ùó Never submit to CRAN with unaddressed **ERRORs** or **WARNINGs**
:::

. . .

To reduce NOTEs:

::: incremental
-   Add your ORCID via `Authors@R`
-   Ensure `Title` and `Description` are plain text
-   Avoid using `cat()` or `print()` in package code unless essential
:::

## üß™ Simulate a CRAN Check

Use `rhub` to simulate CRAN checks on different platforms:

``` r
rhub::check_for_cran()
```

Or test specific platforms:

. . .

``` r
rhub::check(platform = "windows-x86_64-release")
```

. . .

‚úÖ This helps catch issues that only appear on Windows or macOS.

## ‚úâÔ∏è Submit to CRAN

Use the `devtools` helper:

``` r
devtools::release()
```

This will:

::: incremental
-   Check your package one final time
-   Ask you to confirm
-   Open the CRAN web form in your browser
-   Help generate an email to CRAN maintainers
:::

## üì¨ What Happens After Submission?

-   You‚Äôll get an automated confirmation email
-   Within \~24‚Äì72 hours, a CRAN maintainer will review your package
-   They may:
    -   Accept it immediately ‚úÖ
    -   Request fixes or clarifications ‚úçÔ∏è
    -   Reject with detailed reasons ‚ùå

## üîÑ Updating a CRAN Package

To submit an update:

::: incremental
-   Bump the version (e.g., from 1.0.0 ‚Üí 1.0.1)
-   Add a clear `NEWS.md` entry
-   Ensure compatibility with current R version and dependencies
-   Follow the same submission process
:::

::: {.fragment .fade-up}
üìå You can only submit **once every 1‚Äì2 weeks** (per package).
:::


# Outline - GitHub

::: {.fragment .fade-up}
-   Version Control Essentials
-   Git & GitHub Basics
-   Setting Up in RStudio
-   Common Git Workflows
-   Branching & Pull Requests
-   Collaborating with Issues & Projects
-   GitHub Actions for R Projects
-   Managing Releases & Packages
-   Best Practices & Tips
-   Hands-on Exercises
:::

## üîÅ Version Control Essentials

- Track and restore changes in code over time
- Collaborate without overwriting others' work
- Revert to earlier working versions if bugs appear

üõ† Tools Used:

- `git` (local)
- `GitHub` (remote)
- `RStudio` (IDE)

üì¶ Example:

> You change a function in `plot_utils.R`, commit it with message "Refactor histogram labels", and push to GitHub to share with team.

## üêô Git & GitHub Basics

üîπ **Git**: Version control system for your local project  
üîπ **GitHub**: Cloud platform to share and collaborate

üìù Key Terms:

- **Commit** = Savepoint
- **Push/Pull** = Send/Receive changes
- **Repo** = Project folder

üì¶ Example:

> You push your R package to GitHub, allowing your coauthor to edit documentation and submit a pull request.

## üì¶ Installing Git

üîπ Go to [git-scm.com](https://git-scm.com/downloads)

Choose your operating system:

- **Windows**: Download `.exe` and install with default options
- **macOS**: Install via Homebrew `brew install git` or Git installer
- **Linux**: Use package manager, e.g.:
```bash
  sudo apt install git
```

## üß™ Verifying Git Installation

üß™ Run this in your Terminal (or Command Prompt):

```bash
git --version
```
‚úÖ You should see something like:

```text
git version 2.43.0
```
üí° If this works, Git is installed correctly!

## üîë Configuring Git Identity

üîß Set your global Git identity:

```bash
git config --global user.name "Your Name"
git config --global user.email "you@example.com"
```
‚úÖ  To check the name or email currently set in Git,  use these commands:

```bash
git config --global user.name 
git config --global user.email 
```

## üß≠ Connect GitHub to R (Create PAT)

1. In R:

```r
usethis::create_github_token()
```
2. GitHub will open ‚Äî generate a Personal Access Token (PAT)

3. Copy the token (only shown once!)

4. Back in R:
```r
gitcreds::gitcreds_set()
```
Paste your token when prompted.

‚úÖ You‚Äôve now authenticated GitHub from R!


## üß™ Check Setup

Use this helpful diagnostic tool:

```r
usethis::git_sitrep()
```

üí° This tells you:

- Whether Git is installed

- Whether GitHub is connected

- If PAT is stored

## üìÅ Creating a New Git-Enabled Project

In RStudio:

1. **File ‚Üí New Project**
2. Choose:
   - ‚ÄúNew Directory‚Äù ‚Üí ‚ÄúR Package‚Äù (or ‚ÄúNew Project‚Äù)
3. Check the box:
   - ‚úÖ "Create a git repository"
4. Finish project setup

üìÅ A `.git` folder is created ‚Äî this is a Git repo!

## üåê Connect to GitHub

Run this to create and link a GitHub repo:

```r
usethis::use_github()
```
This will:

- Push your project to GitHub
- Open the new repo in your browser

> üí° You can now push/pull changes from RStudio Git tab

## üîÑ Common Git Workflows

üéØ Daily workflow steps:

1. Edit `R/stats_module.R`
2. Stage ‚Üí Commit ‚Üí Push

üíª In RStudio Git tab:

- Stage: click checkbox
- Commit: type a message
- Push: upload to GitHub

üîÅ Example:

> Commit message: "Add confidence interval to mean_plot()"


# Resources & Further Reading

-   **Happy Git & GitHub for the useR**: <https://happygitwithr.com/>
-   **usethis**: <https://usethis.r-lib.org>
-   **GitHub Docs**: workflows, Actions, projects

??? note Encourage exploring book chapters and cheat sheets.

# Q&A

-   Questions on Git commands?
-   Collaboration challenges?
-   CI/CD integrations?

# Thank You


