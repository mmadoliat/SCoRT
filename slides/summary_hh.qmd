---
title: "Short Course on R Tools"
title-slide-attributes:
  data-background-image: mu-bg.png
  data-background-size: stretch
  data-slide-number: none
format: 
  revealjs:
    transition: fade
    scrollable: true
---

# ğŸ 4. Python in R {transition="slide"}

## ğŸ’¡ Why Call Python in R? {transition="convex"}

::: incremental
-   ğŸ”„ **Avoid rewriting code** from one language to another
-   ğŸ” **Call shared models** or preprocessing functions written in Python
-   ğŸ“¦ **Reuse Python packages** or APIs within your R workflow
-   ğŸ“¤ **Publish reproducible reports** that include both R and Python code
:::

## What is `reticulate`?

::: incremental
-   R package for interoperability with Python
-   Maintains a shared Python session accessible from R
-   Automatic conversion of many R types to Python and vice versa
-   Supports inline Python code in R Markdown and R scripts
:::

## ğŸ¥ Demo: Python from R in RStudio

{{< video images/python/reticulate.mp4 >}}

## ğŸ” Example: Use Python from R {.smaller}

::::::: columns
:::: {.column width="50%"}
**ğŸ“¦ R with reticulate**
```r
library(reticulate)
sklearn <- import("sklearn")
model_selection <- sklearn$model_selection
neural_network <- sklearn$neural_network
X <- as.matrix(iris[, 1:4])         
y <- as.integer(iris$Species) - 1     
train_test <- model_selection$train_test_split(X, y, test_size = 0.2, random_state = 42)
X_train <- train_test[[1]]
X_test <- train_test[[2]]
y_train <- train_test[[3]]
y_test <- train_test[[4]]
mlp <- neural_network$MLPClassifier(hidden_layer_sizes = tuple(10L))
mlp$fit(X_train, y_train)
y_pred <- mlp$predict(X_test)
```
::::

:::: {.column width="50%"}
**ğŸ Native Python**
```python
from sklearn.datasets import load_iris
from sklearn.model_selection import train_test_split
from sklearn.neural_network import MLPClassifier
iris = load_iris()
X, y = iris.data, iris.target
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)
mlp = MLPClassifier(hidden_layer_sizes=(10,))
mlp.fit(X_train, y_train)
y_pred = mlp.predict(X_test)
```
::::
:::::::

# ğŸ“¦ 5. Build Your Own R Package

## ğŸ’¡ Motivations to Package Your Code

ğŸ§° **Why build a package?**

::: incremental
-   â™»ï¸ Reuse and organize reusable code chunks
-   ğŸ“– Provide **documentation** and **examples**
-   ğŸ§ª Add **unit tests** to ensure reliability
-   ğŸŒ Distribute:
    -   via **CRAN** for wide access
    -   via **GitHub** for collaborative development
    -   or keep it **private** for internal use
:::


## ğŸ— Package Structure Overview

``` text
mypkg/
â”œâ”€â”€ DESCRIPTION         # ğŸ“‹ Package metadata
â”œâ”€â”€ NAMESPACE           # ğŸ” Exported functions & imports
â”œâ”€â”€ R/                  # ğŸ“‚ Your R functions
â””â”€â”€ man/                # ğŸ“š Auto-generated documentation
```

. . .

ğŸ’¡ Other folders you may add:

::: incremental
-   ğŸ“‚ **tests/** â†’ Unit tests (testthat)
-   ğŸ“‚ **vignettes/** â†’ Long-form docs
-   ğŸ“‚ **data/** â†’ Internal or example datasets
:::

## ğŸ›  Package States in R {transition="zoom"}

R packages transition through five development states:

::: incremental
-   ğŸ—‚ï¸ **Source**: your raw package folder
-   ğŸ“¦ **Bundled**: compressed .tar.gz for sharing
-   ğŸ§± **Binary**: platform-specific precompiled version
-   ğŸ“š **Installed**: available in your R library
-   ğŸ§  **In-Memory**: actively loaded via library()
:::

::: {.fragment .fade-up}
> Understanding these states helps you manage installation, sharing, and usage workflows.
:::

## ğŸ” Transitioning Between States {transition="convex"}

![](images/package/install-load.png){fig-align="center" fig-alt="Screenshot of Pagerank" width="55%"}

## ğŸ¥ Demo: Rfssa Package 

{{< video images/package/rfssa_pack.mp4 >}}



# 6. ğŸ“¤ CRAN Submitting {transition="zoom"}

## ğŸš€ Submitting to CRAN

::: incremental
-   ğŸ“¦ **CRAN** = Comprehensive R Archive Network\
-   ğŸ¯ Goal: Make your R package **public, discoverable, and installable**
-   âœ” Must pass `R CMD check` with:
    -   âŒ No **ERRORs**
    -   âš ï¸ No **WARNINGs**
    -   ğŸ“ Minimal and justifiable **NOTEs**
-   ğŸ§ª Simulate checks: `rhub::check_for_cran()`
-   ğŸ“¤ Submit with: `devtools::release()`
-   â±ï¸ Response in approx **1â€“3 days**
:::

## ğŸ“© Confirmation Email (After Submission) {transition="zoom"}

![](images/package/submission_confirm.png){fig-align="left" fig-alt="Screenshot of Pagerank" width="55%"}

------------------------------------------------------------------------

## ğŸ“¬ Submission Confirmed Email {transition="zoom"}

![](images/package/submission_confirm2.png){fig-align="left" fig-alt="Screenshot of Pagerank" width="95%"}

## â³ Pending Manual Inspection Email {transition="zoom"}

![](images/package/auto-pros.png){fig-align="left" fig-alt="Screenshot of Pagerank" width="95%"}

## âœ… Package Initially Accepted Email {transition="zoom"}

![](images/package/accepted.png){fig-align="left" fig-alt="Screenshot of Pagerank" width="55%"}

::: fragment
> ğŸ‰ Good news!
:::

## ğŸ“¦ Package Built on CRAN Email {transition="zoom"}

![](images/package/accept2.png){fig-align="left" fig-alt="Screenshot of Pagerank" width="55%"}

::: fragment
> ğŸ§± CRAN has built binaries for major platforms (Windows, ...).
:::

## ğŸŒ CRAN Page Created {transition="zoom"}

![](images/package/Cran_Rfssa.png){fig-align="left" fig-alt="Screenshot of Pagerank" width="55%"}

> ğŸŒ Your package is now live! Searchable and installable via:

``` r
install.packages("Rfssa")
```

# 7. ğŸ“¤ GitHub Essentials {transition="convex"}

------------------------------------------------------------------------

## ğŸŒ Why Use Git & GitHub?

::: incremental
-   ğŸ” **Version Control**: Track and manage changes in code
-   ğŸ¤ **Collaboration**: Work with others without overwriting files
-   ğŸ§ª **Reproducibility**: Restore older versions when bugs occur
-   ğŸ”„ **Open Source**: Share your package with the world
:::

::: fragment
> ğŸ§° Git = Local tracking tool\
> â˜ï¸ GitHub = Online hosting and teamwork platform
:::

## ğŸ§° Git & GitHub from RStudio {transition="convex"}

âœ… RStudio has built-in Git integration:

::: {.fragment .custom .blur}
-   Git tab for **staging, committing, and pushing**
:::

::: {.fragment .custom .blur}
-   Visual diff and commit history
:::

::: {.fragment .custom .blur}
-   Push to GitHub without leaving RStudio
:::

## ğŸ”§ Set Up GitHub in R {transition="concave"}

. . .

1.  âœ… **Install Git** ([git-scm.com](https://git-scm.com))

. . .

2.  ğŸ”‘ **Create Personal Access Token (PAT)**:

``` r
usethis::create_github_token()
gitcreds::gitcreds_set()
```

. . .

3.  ğŸ”— **Link your project to GitHub**:

``` r
usethis::use_github()
```

> ğŸ‰ Your RStudio project is now connected to GitHub!

## ğŸ“¦ Create a Git-Enabled R Package Project

1.  `File` â†’ `New Project` â†’ `New Directory` â†’ `R Package`

. . .

2.  âœ… Check **"Create a git repository"**

. . .

3.  Inside the project:

``` r
usethis::use_git()
usethis::use_github()
```

. . .

> ğŸ“ You now have a `.git` repo and a linked GitHub project!

------------------------------------------------------------------------

## ğŸ” Daily Git Workflow in RStudio

> ğŸ¯ A typical work cycle for package developers:

::: {.fragment .fade-right}
| Step      | Description                           |
|-----------|---------------------------------------|
| âœï¸ Edit   | Make changes to `.R` or `.Rmd` files  |
| âœ… Stage  | Select files to track in Git tab      |
| ğŸ’¬ Commit | Save with a message (e.g., "Fix bug") |
| ğŸš€ Push   | Send to GitHub                        |
:::

. . .

## ğŸ§ª Example: Collaborative Workflow

::: {.fragment .custom .blur}
1.  You write a new function: `plot_confidence()`
:::

::: {.fragment .custom .blur}
2.  Commit message: `"Add CI plot to visual module"`
:::

::: {.fragment .custom .blur}
3.  Push to GitHub â†’ colleague reviews & suggests changes
:::

## âœ… GitHub for Package Development

::: incremental
-   ğŸ“¦ Host your package openly
-   ğŸ§ª Enable collaborative testing & documentation
-   ğŸ“¤ Submit to CRAN from a clean version-controlled repo
-   ğŸ” Great for long-term maintenance and open-source visibility
:::

::: {.fragment .fade-right}
> ğŸ¯ If you publish your package, link the GitHub repo in `DESCRIPTION`
:::

## ğŸ“š Resources

-   ğŸ“˜ Happy Git with R: <https://happygitwithr.com>
-   ğŸ”§ usethis: <https://usethis.r-lib.org>
-   ğŸ§ª gitcreds: <https://github.com/r-lib/gitcreds>
-   ğŸ“‚ GitHub Docs: <https://docs.github.com/>

# ğŸ™ Thank you!

Questions & Discussion
